#######################################################################################
#                                                                                     #
#                                   إعدادات ملف mpv.conf                                #
#                                                                                     #
#######################################################################################

#######################################################################################
#                                   إعدادات عامة                                     #
#######################################################################################

# **----- واجهة المستخدم (UI) -----**
#  تخصيص مظهر وسلوك نافذة برنامج MPV

fs                  = yes               #  تشغيل الفيديو بوضع ملء الشاشة تلقائيًا عند الفتح.
keep-open           = yes               #  إبقاء نافذة البرنامج مفتوحة بعد انتهاء الفيديو، مفيد إذا كنت تريد رؤية آخر لقطة أو التحكم اليدوي بالإغلاق.
force-window        = immediate         #  فتح نافذة البرنامج بشكل فوري عند بدء التشغيل، حتى قبل تحميل الفيديو بالكامل، لتحسين الاستجابة الظاهرية.
border              = no                #  إخفاء حواف النافذة التقليدية، مما يعطي مظهرًا أكثر نظافة وانسيابية.
osd-bar             = no                #  تعطيل شريط التحكم والمعلومات الافتراضي (On-Screen Display)، وذلك لاستخدام واجهة مستخدم بديلة مثل uosc.

#######################################################################################
#                                   إعدادات الأداء                                   #
#######################################################################################

# **----- معالجة الفيديو (Video Processing) -----**
#  الخيارات المتعلقة بفك ترميز الفيديو واستخدام موارد الجهاز

hwdec               = auto              #  تفعيل فك ترميز الفيديو باستخدام الهاردوير (GPU) تلقائيًا إذا كان جهازك يدعم ذلك. هذا يُحسن الأداء ويُقلل الحمل على المعالج المركزي (CPU).
gpu-api             = d3d11             #  تحديد واجهة برمجة تطبيقات الرسوميات (GPU API) المستخدمة. هنا تم اختيار DirectX 11 للحصول على أفضل أداء على نظام ويندوز (قد تحتاج لتغييرها لأنظمة أخرى مثل لينكس).
vo                  = gpu-next          #  اختيار محرك عرض الفيديو (Video Output) الجديد والمحسن الذي يعتمد على وحدة معالجة الرسوميات (GPU) لتقديم أداء أفضل وجودة أعلى.

# **----- إدارة الذاكرة (Memory Management / Cache) -----**
#  خيارات التحكم في استخدام الذاكرة المؤقتة (الكاش) لتحسين سلاسة التشغيل

cache               = yes               #  تفعيل نظام الكاش بشكل عام، مما يسمح بتخزين أجزاء من الفيديو مؤقتًا في الذاكرة لتحسين الأداء، خاصة عند تشغيل الفيديو عبر الإنترنت أو من مصادر بطيئة.
demuxer-max-bytes   = 500M              #  تحديد الحد الأقصى لحجم الكاش المُستخدم لعملية فك ترميز الفيديو (Demuxing)، هنا تم تحديده بـ 500 ميجابايت. هذا يسمح بتخزين جزء كبير من الفيديو مؤقتًا.
demuxer-max-back-bytes= 100M              #  تحديد حجم الكاش المستخدم للقراءة الخلفية للفيديو (Back-Buffer).  هنا تم تحديده بـ 100 ميجابايت، وهو يُستخدم لتخزين البيانات التي تم قراءتها بالفعل، مما يُحسن تجربة الرجوع للخلف في الفيديو.

#######################################################################################
#                                 جودة الصورة والمعالجة                               #
#######################################################################################

# **----- مؤثرات Anime4K (Anime4K Shaders) -----**
#  تطبيق مجموعة من المؤثرات الرسومية باستخدام GLSL shaders لتحسين جودة الصورة، خاصة عند تكبير فيديوهات الأنمي أو ذات الدقة المنخفضة. هذه المجموعة تركز على تحقيق توازن بين الحدة والنعومة وتقليل التشويش.

glsl-shaders = "~~/shaders/Anime4K_Clamp_Highlights.glsl;~~/shaders/Anime4K_Restore_CNN_VL.glsl;~~/shaders/Anime4K_Upscale_CNN_x2_VL.glsl;~~/shaders/Anime4K_Restore_CNN_M.glsl;~~/shaders/Anime4K_AutoDownscalePre_x2.glsl;~~/shaders/Anime4K_AutoDownscalePre_x4.glsl;~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl"
# * شرح تفصيلي لمكونات مؤثرات Anime4K بالترتيب:
#   1. Anime4K_Clamp_Highlights.glsl:  التحكم في المناطق الساطعة في الصورة (Highlights) لمنعها من أن تصبح مُبالغًا فيها أو "محروقة"، مما يحافظ على تفاصيل الصورة في المناطق المضيئة.
#   2. Anime4K_Restore_CNN_VL.glsl:  استعادة بعض التفاصيل الدقيقة في الصورة باستخدام شبكة عصبية التفافية (Convolutional Neural Network - CNN) بنسخة "خفيفة جدًا" (Very Light - VL)، يهدف إلى تحسين الوضوح بشكل طفيف مع الحفاظ على الأداء.
#   3. Anime4K_Upscale_CNN_x2_VL.glsl:  تكبير الصورة بمقدار الضعف (x2) باستخدام شبكة عصبية التفافية بنسخة "خفيفة جدًا"، يوفر تكبيرًا معقولًا مع تأثير محدود على الأداء.
#   4. Anime4K_Restore_CNN_M.glsl: استعادة المزيد من التفاصيل في الصورة باستخدام شبكة عصبية التفافية بنسخة "متوسطة" (Medium - M)، يوفر تحسينًا أكبر للتفاصيل مقارنة بالنسخة VL ولكنه قد يستهلك موارد أكثر.
#   5 & 6. Anime4K_AutoDownscalePre_x2.glsl & Anime4K_AutoDownscalePre_x4.glsl:  مؤثرات للتقليل التلقائي لحجم الصورة قبل التكبير (Downscaling). تستخدم لتحسين جودة التكبير عن طريق تقليل التشويش والتحسينات غير المرغوب فيها التي قد تحدث عند تكبير الصور ذات الدقة العالية بالفعل. النسخة x2 تستخدم للتقليل بمقدار الضعف، و x4 بمقدار أربعة أضعاف.
#   7. Anime4K_Upscale_CNN_x2_M.glsl:  عملية التكبير النهائية للصورة بمقدار الضعف (x2) باستخدام شبكة عصبية التفافية بنسخة "متوسطة"، يُعتبر هذا المؤثر هو المسؤول عن معظم عملية التكبير النهائية وتحسين الجودة.

# **----- مزامنة العرض (Video Sync) -----**
#  ضبط تزامن عرض الفيديو مع معدل تحديث الشاشة لمنع مشاكل التقطيع أو عدم الانسيابية في الحركة.

video-sync          = display-resample    #  مزامنة عرض الفيديو مع معدل تحديث الشاشة عن طريق إعادة أخذ عينات من الفيديو (Resampling) لضمان عرض سلس ومتزامن، مما يقلل من مشاكل التقطيع (Stuttering) وعدم التوافق بين معدل إطارات الفيديو ومعدل تحديث الشاشة.

#######################################################################################
#                                   إعدادات الصوت                                    #
#######################################################################################

audio-channels      = 5.1                 #  تفعيل دعم الصوت المحيطي 5.1، مما يسمح بتوزيع الصوت على ستة قنوات (أمامية يمين ويسار، مركزية، خلفية يمين ويسار، و Subwoofer) لتجربة صوتية أكثر غمرًا إذا كان جهازك ونظام الصوت يدعمان ذلك.
volume-max          = 200                 #  زيادة الحد الأقصى لمستوى الصوت المتاح إلى 200% من المستوى الأصلي، مما يوفر نطاقًا أوسع للتحكم في مستوى الصوت.
alang               = ar,jpn,jap,ja,en    #  تحديد ترتيب تفضيلات لغة الصوت. سيحاول البرنامج اختيار المسار الصوتي باللغة العربية أولًا، ثم اليابانية (بأشكال كتابة مختلفة)، ثم الإنجليزية، وأي لغة أخرى غير محددة ستأتي بعد هذه اللغات في الترتيب.

#######################################################################################
#                                   إعدادات الترجمة                                  #
#######################################################################################

slang               = ar,en               #  تحديد ترتيب تفضيلات لغة الترجمة. سيحاول البرنامج اختيار ملف الترجمة باللغة العربية أولًا، ثم الإنجليزية، وأي لغة أخرى غير محددة ستأتي بعد هذه اللغات في الترتيب.

#######################################################################################
#                                   إعدادات إضافية                                  #
#######################################################################################

save-position-on-quit = yes               #  تفعيل حفظ موضع التشغيل الحالي للفيديو عند إغلاق البرنامج، مما يسمح باستئناف المشاهدة من نفس النقطة في المرة القادمة.
watch-later-config    = yes               #  تفعيل نظام "المشاهدة لاحقًا" المدمج في MPV، والذي يسمح بتسجيل مقاطع الفيديو غير المكتملة في قائمة خاصة لاستئنافها لاحقًا.
video-output-levels   = full              #  توسيع نطاق إخراج الفيديو إلى "كامل" (Full Range) بدلاً من "محدود" (Limited Range). هذا قد يحسن تباين الألوان والمدى الديناميكي للفيديو، خاصة على الشاشات الحديثة التي تدعم النطاق الكامل.

#######################################################################################
#                                     Dither                                        #
#######################################################################################

# **----- Dithering (تنعيم الألوان) -----**
#  خيارات لتحسين جودة الألوان ومنع ظهور تدرجات لونية غير مرغوب فيها (Color Banding)، خاصة في الفيديوهات ذات التدرجات اللونية الدقيقة.

dither-depth        = auto              #  تحديد عمق الديثر (Dithering Depth) تلقائيًا بناءً على صيغة الفيديو وإعدادات العرض، للحصول على أفضل توازن بين الجودة والأداء.
temporal-dither     = yes               #  تفعيل الديثر الزمني (Temporal Dithering)، وهي تقنية متقدمة لتحسين جودة الديثر عن طريق تغيير نمط الديثر مع مرور الوقت، مما يقلل من ظهور الأنماط الثابتة ويزيد من نعومة التدرجات اللونية.
dither-fruit        = fruit             #  اختيار خوارزمية الديثر المستخدمة، هنا تم اختيار "fruit" وهي خوارزمية تعتبر جيدة في تحقيق توازن بين الجودة والأداء.
dither-size-fruit   = 2                 #  تخصيص حجم نمط الديثر لخوارزمية "fruit"، القيمة 2 تمثل حجمًا متوسطًا يعتبر مناسبًا لمعظم الحالات.

#######################################################################################
#                                    Debanding                                      #
#######################################################################################

# **----- Debanding (إزالة الشرائط اللونية) -----**
#  خيارات للحد من تأثير "شرائط الألوان" (Color Banding) وهي تدرجات لونية غير متصلة تظهر بشكل ملحوظ في بعض الفيديوهات ذات الجودة المنخفضة أو المضغوطة بشدة.

deband              = yes               #  تفعيل خاصية إزالة الشرائط اللونية بشكل عام.
deband-iterations   = 4                 #  تحديد عدد مرات تكرار عملية إزالة الشرائط. زيادة هذا الرقم قد يحسن من فعالية الإزالة ولكنه قد يزيد من استهلاك الموارد. 4 مرات تعتبر قيمة متوازنة.
deband-threshold    = 48                #  تحديد عتبة حساسية فلتر إزالة الشرائط. القيم الأعلى تجعل الفلتر أقل حساسية وأكثر انتقائية في إزالة الشرائط اللونية. 48 هي قيمة معقولة.
deband-range        = 16                #  تحديد نطاق تأثير فلتر إزالة الشرائط. القيم الأعلى توسع نطاق تأثير الفلتر ليشمل مناطق أوسع من الصورة. 16 هي قيمة متوسطة.
deband-grain        = 48                #  إضافة كمية صغيرة من "الخشونة" (Grain) إلى الصورة بعد إزالة الشرائط اللونية. هذا يساعد في تقليل التنعيم المفرط الذي قد ينتج عن عملية إزالة الشرائط ويحافظ على مظهر طبيعي أكثر للصورة. 48 هي قيمة للخشونة الخفيفة.

#######################################################################################
#                                   Subtitles                                      #
#######################################################################################

# **----- الترجمة (Subtitles) -----**
#  خيارات متعلقة بعرض الترجمة وتفضيلاتها.

blend-subtitles     = yes               #  تفعيل "مزج" الترجمة مع الفيديو، مما يجعلها تبدو أكثر سلاسة وتكاملاً مع الصورة، خاصة عند استخدام مؤثرات بصرية على الترجمة.
subs-with-matching-audio= no                #  تعطيل خاصية ربط الترجمة بمسار الصوت المطابق. في الوضع الافتراضي (تفعيل)، قد يحاول البرنامج اختيار الترجمة بناءً على لغة الصوت، ولكن تعطيل هذا الخيار يمنع حدوث أي تأخير أو مشاكل في عرض الترجمة إذا لم يتم العثور على تطابق تام بين لغة الصوت والترجمة.

#######################################################################################
#                                 تعديلات إضافية                                  #
#######################################################################################

audio-channels      = stereo            #  تعديل إعداد قنوات الصوت إلى ستيريو (قناتين) بدلاً من 5.1. قد يكون هذا التعديل مقصودًا لتشغيل الصوت بشكل افتراضي على سماعات ستيريو أو إذا كان هناك مشكلة في دعم الصوت المحيطي في جهازك.
ytdl-format = "bestvideo[height<=?1080]+bestaudio/best"
#  تحديد تنسيق جودة الفيديو والصوت عند تشغيل روابط يوتيوب أو مواقع الفيديو الأخرى المدعومة بواسطة ytdl-format. هذا الخيار يضمن الحصول على أفضل جودة فيديو متاحة بشرط ألا تتجاوز دقة 1080p وألا يكون الترميز الفيديو VP9 (ربما لتوافق أفضل أو تفضيل ترميزات أخرى)، مع اختيار أفضل جودة صوت مصاحبة.


#######################################################################################
#                                   نهاية الإعدادات                                   #
#######################################################################################

